//--------------------------------------------------------------
// 熊貓模擬器 - 地圖伺服器配置檔案
// 本配置檔案由 Peter Kieser <pfak@telus.net> 翻譯成英文
// 由熊貓模擬器開發團隊翻譯成中文並加以潤色
//--------------------------------------------------------------
// 提示: 此配置檔案中, 只要是以 // 作為開頭的行, 都是註釋資訊. 
// 註釋資訊您可以隨意修改, 不會干擾伺服器的任何行為. 
//--------------------------------------------------------------
// 請填寫以 PDSAC 開頭的啟用碼
activation_code: PDSAC01-8D94FC0C-EA28-4563-9912-1AE1616D1426

// 登錄、角色、地圖伺服器之間內部通訊的賬號密碼
// 此處的值必須和數據庫中 login 表那條性別為 S 的記錄一致,
// 否則會導致三個伺服器之間無法進行內部通訊
userid: s1
passwd: p1

// 角色伺服器的 IP 地址
// 地圖伺服器會依賴這個 IP 地址去和角色伺服器建立連線.
// 
// 提醒: 若您想啟用 char_ip 選項的話, 記得去掉 char_ip 前面的註釋符 //,
//       否則伺服器會忽略它, 導致配了和沒配一樣. 
char_ip: 127.0.0.1

// 地圖伺服器繫結的 IP 地址
// 若啟用了此選項, 那麼地圖伺服器只會監聽來自這個 IP 地址的網絡卡數據.
// 
// 注意: 該選項允許你在有多個公網網絡卡(也意味著有多個公網IP)的機器上, 
//       使用相同的"地圖伺服器埠"來開多個服. 
// 提醒: 若您想啟用 bind_ip 選項的話, 記得去掉 bind_ip 前面的註釋符 //,
//       否則伺服器會忽略它, 導致配了和沒配一樣. 
bind_ip: 127.0.0.1

// 角色伺服器埠
// 地圖伺服器會根據此處的配置和角色伺服器建立連線
char_port: 6121

// 地圖伺服器的 IP 地址
// 當玩家通過角色伺服器選擇角色之後, 會將這裡設定的 IP 地址發送給客戶端.
// 客戶端將會使用這裡配置的 IP 地址來和地圖伺服器建立連線. 
// 若您想對外開服(而不是開單機服)的話, 請把您的公網 IP 地址設定到這裡. 
// 
// 提醒: 若您想啟用 map_ip 選項的話, 記得去掉 map_ip 前面的註釋符 //,
//       否則伺服器會忽略它, 導致配了和沒配一樣. 
map_ip: 127.0.0.1

// 地圖伺服器埠 (預設埠為: 5121)
// 此埠會開放給遊戲客戶端建立連線
map_port: 5121

// 往控制檯視窗中顯示內容時, 在每行資訊的前面加上時間戳. 
// 最終組成的時間最大長度不能超過 20 個字元.
//  
// 常用的時間格式有:
//    %I:%M:%S %p (小時:分鐘:秒數 12小時制, 會攜帶AM或PM標記)
//    %H:%M:%S (小時:分鐘:秒數, 24小時制)
//    %d/%b/%Y (日期/月份/年份)
// 更多的格式資訊, 請參考 C 語言的 strftime 函式用法. 
// 
// rAthena 官方預設值是 [%d/%b %H:%M] 也就是24小時制的 [日/月 時:分]
// 這明顯不符合國人習慣, 為此熊貓模擬器將其預設值改成了 [%Y/%m/%d %H:%M] 
// 
// 若想啟用時間戳的話, 請將下面這一行頭部的註釋符//去掉
//timestamp_format: [%d/%b %H:%M]

// 當服務端程式被一些啟動器 (LeeStarter) 執行, 從而導致輸出資訊被重定向時, 
// 是否也將顏色程式碼一同輸出? 
// 
// 問: 這裡提到的重定向是指什麼? 
// 答: 原本地圖伺服器的資訊將直接顯示到控制檯視窗, 不過若使用一些啟動工具
//     來啟動地圖伺服器的話, 原本應該顯示到控制檯的資訊, 就會被"劫持"到了
//     啟動工具裡面顯示, 這種情況稱之為"輸出資訊被重定向了"!
// 
// 問: 這裡提到的顏色程式碼是指什麼? 
// 答: 在我們檢視控制檯的過程中, 會發現類似 [Status] 的字是綠色的, 
//     而 [Error] 是紅色的. 這是因為在程式往控制檯輸出資訊時, 加入了一些
//     顏色編碼的緣故. 比如, 若使用顏色編碼 "\033[1;31m" 那麼則表示接下來的
//     字元用紅色輸出. 其實有點類似我們指令碼中使用的 ^xxxxxx 顏色程式碼. 
// 
// 此選項一般情況下推薦關閉, 因為基本沒什麼啟動器支援著色
stdout_with_ansisequence: no

// 記錄地圖伺服器在控制檯中產生的部分資訊到 /log/ 目錄中
// 首先您要確保熊貓模擬器的目錄中有一個 log 資料夾, 沒有的話必須手動建立, 
// 否則日誌檔案將不會產生.
// 
// 1: 記錄控制檯中以  [Warning] 開頭的警告資訊
// 2: 記錄控制檯中以  [Error]   開頭的錯誤資訊和數據庫錯誤資訊
// 4: 記錄控制檯中以  [Debug]   開頭的除錯資訊
// 
// 例如: 想要記錄 [Warning]、[Error]、[Debug] 開頭的資訊, 
//       只需要將1、2、4相加, 將 console_msg_log 設定為 7 即可 (1+2+4)! 
// 
// 日誌資訊的記錄並不會被 console_silent 選項影響.
// 也就是說假如 console_msg_log 設定為 2 想記錄 [Error] 資訊,
// 而在 console_silent 中設定為 16 想隱藏 [Error] 資訊,
// 此時系統將會隱藏 [Error] 資訊不顯示到控制檯, 但與此同時會記錄 [Error] 資訊到日誌中
console_msg_log: 7

// 將地圖伺服器在控制檯中產生的要記錄的資訊, 寫到下面指定的日誌檔案中
console_log_filepath: ./log/map-msg_log.log

// 選擇性隱藏地圖伺服器控制檯中顯示出來的一些提示資訊: 
// 1:  隱藏控制檯中以  [Info]    開頭的提示資訊
// 2:  隱藏控制檯中以  [Status]  開頭的狀態資訊
// 4:  隱藏控制檯中以  [Notice]  開頭的注意資訊
// 8:  隱藏控制檯中以  [Warning] 開頭的警告資訊
// 16: 隱藏控制檯中以  [Error]   開頭的錯誤資訊和數據庫錯誤資訊
// 32: 隱藏控制檯中以  [Debug]   開頭的除錯資訊
// 若您想同時隱藏多種資訊, 只需要將其對應的數字相加即可
// 例如: 若您想要隱藏[Info]、[Status]、[Notice]開頭的資訊, 
//       那麼只需要將1、2、4相加, 填寫 7 即可 (1+2+4)
console_silent: 0

// DB 檔案放在哪個目錄中 (就是那個裡面存放著 const.txt 的目錄)
// 您可以在此修改 DB 檔案存放的目錄名稱
db_path: db

// 是否啟用 @guildspy 和 @partyspy 指令? 
// 注意: 啟用這兩個指令會降低封包的發送效能, 請酌情處理
enable_spy: no

// 是否從 grf-files.txt 所配置的 GRF 檔案或者 data 目錄中
// 讀取地圖數據 (例如: Gat 檔案 和Rsw 檔案), 而不是從地圖快取檔案中讀取? 
// 
// 問: 地圖快取檔案的位置是? 
// 答: 復興前在 db\pre-re\map_cache.dat 復興后在 db\re\map_cache.dat
use_grf: no

// 是否允許在地圖伺服器的控制檯中直接輸入指令
// 開啟控制檯指令后, 您可以在 map-server 的控制檯中輸入命令
// 
// 在地圖伺服器的控制檯中輸入 help 然後回車, 可以檢視指令說明
// 比如: 輸入 admin:@reloadscrpit 可以直接讓地圖伺服器過載所有指令碼
// 
// 想要啟用這個功能的話, 請將下面的值改成on即可
// 若啟用, 那麼請避免在控制檯中使用 ">& 日誌檔案.log" 這樣的輸出指令
console: off

// 每一輪自動存檔的時間間隔 (以秒為單位)
// 線上的全部玩家數據都會在設定的時間內被自動存檔
// 注意: 當你設定為 300 秒儲存一輪的情況下, 如果有 300 個玩家線上, 
//       那麼每秒鐘會儲存1個玩家的數據.
autosave_time: 300

// 最小存檔的間隔時間 (以毫秒為單位)
// 此選項可防止一個角色在短時間內被頻繁存檔, 線上人數非常多的伺服器
// 利用此選項可以大幅降低角色伺服器和地圖伺服器的存檔壓力
minsave_time: 100

// 除了 autosave_time 指定的自動存檔之外, 
// 當玩家進行下列操作行為之後, 應該立刻馬上執行存檔過程: 
// 
// 1:    每次和另外一個玩家交易成功
// 2:    每次成功開啟露天商店/露天商店有東西賣出
// 4:    每次關閉個人倉庫/公會倉庫
// 8:    每次寵物被孵化/變回蛋狀態
// 16:   每次成功的發送了一封帶有附件的郵件
// 32:   每次成功的在拍賣行提交一個物品
// 64:   每次接到/刪除/完成一個任務
// 128:  每次完成隨身銀行的存錢/取錢操作
// 256:  每次獲得簽到獎勵之後
// 4095: 以上全部時機都要立刻執行數據的存檔過程
// 
// 提示: 此選項可以在一些經常崩潰的服務端上, 起到很重要的儲存作用.
//       通過增加一些關鍵的儲存時機, 來避免玩家的數據丟失.
//
//       不過若您的服務端程式很少發生崩潰, 那麼可以儘量減少儲存時機,
//       以此來降低內部伺服器的通訊延遲. 因為儲存數據需要伺服器之間
//       很多內部數據傳遞和聯動. 
save_settings: 4095

// 聊天欄公告資訊配置檔案的路徑
// 當角色登入遊戲后, 裡面的資訊會顯示在聊天欄
motd_txt: conf/motd.txt

// 當遊戲管理員使用 @help 或 @h 指令時
// 會從下面的配置檔案中載入相關的指令說明顯示到聊天欄
charhelp_txt: conf/charhelp.txt

// 頻道系統的配置檔案
channel_conf: conf/channels.conf

// 地圖相關的配置檔案
import: conf/maps_athena.conf

//===================================
// 熊貓模擬器拓展設定
//===================================
// 定義您想要使用的封包混淆金鑰
// 
// 從某個時間點開始, rAthena 官方放棄了 db/packet_db.txt 檔案
// 以後您可以在這裡配置自定義的封包混淆金鑰
// 若不配置, 則自動使用韓服官方客戶端預設的混淆金鑰.
//
// 關閉封包混淆機制的服務端不受此選項影響
// 熊貓模擬器預設開啟混淆, 可在官網定製中關閉封包混淆功能.
// 
// 不想修改的話, 請保持預設值: default
// 若想修改的話, 格式為(英文逗號左右都不能有空格): 0x3B550F07 0x1F666C7C 0x60304EF5
//
// 注意: 客戶端從 2018-03-07 版本開始, 已經不再使用封包混淆機制了
// 若您使用的客戶端版本大於等於 2018-03-07, 那麼這裡維持 default 即可.
//packet_keys: default
//packet_keys: 0x3B550F07,0x1F666C7C,0x60304EF5
//packet_keys: 0x1e43fa07,0x02735301,0x32701e5b
packet_keys: default

import: conf/import/map_conf.txt


